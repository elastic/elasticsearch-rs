# Skip file of features and tests to skip.
# This is used at compilation time, when compiling tests from the YAML tests, to not generate tests that match
# on name or features defined below that should be skipped. Accordingly, changing values in this file requires
# recompiling tests in order for the changes to take effect.

# features not yet implemented
features:
  - node_selector
  - stash_path_replace
  - embedded_stash_key

# tests to skip generating and compiling a test for
tests:

  xpack/api_key/10_basic.yml:
    # Regex contains variable substitutions that the test harness doesn't support yet
    - "Test invalidate api keys"

  xpack/data_stream/40_supported_apis.yml:
    # uses number as a key into object. serde_json::Value expects a string key
    - "Verify shard stores api"

  xpack/data_stream/80_resolve_index_data_streams.yml:
    # Regex not properly interpreted by the test harness
    - "Resolve index with hidden and closed indices"
    # expected value json["indices"][0]["name"] to match String("test_index1") but was String(".security-7")
    - "Resolve index with indices, aliases, and data streams"

  xpack/license/20_put_license.yml:
    # expected value json["basic_was_started"] to match Bool(true) but was Bool(false)
    - "Current license is trial means not eligle to start trial"
    # expected value json["license_status"] to match String("valid") but was String("invalid")
    - "Installing and getting license works"
    # expected value json["acknowledged"] to match Bool(false) but was Bool(true)
    - "Must acknowledge to start basic"
    # expected value json["license_status"] to match String("valid") but was String("invalid")
    - "Should install a feature type license"

  xpack/license/30_enterprise_license.yml:
    # expected value json["license_status"] to match String("valid") but was String("invalid")
    - "Installing enterprise license"

  xpack/ml/calendar_crud.yml:
    - "*"

  xpack/ml/filter_crud.yml:
    # Warning "this request accesses system indices..." to match is wrong on all tests
    - "*"

  xpack/ml/custom_all_field.yml:
    - "*"

  xpack/ml/data_frame_analytics_cat_apis.yml:
    - "*"

  xpack/ml/data_frame_analytics_crud.yml:
    - "*"

  xpack/ml/datafeed_cat_apis.yml:
    - "*"

  xpack/ml/datafeeds_crud.yml:
    - "*"

  xpack/ml/delete_expired_data.yml:
    # Warning "this request accesses system indices..." to match is wrong.
    - "Test delete expired data with job id"

  xpack/ml/delete_job_force.yml:
    - "*"

  xpack/ml/explain_data_frame_analytics.yml:
    - "*"

  xpack/ml/get_datafeed_stats.yml:
    - "*"

  xpack/ml/get_datafeeds.yml:
    - "*"

  xpack/ml/get_model_snapshots.yml:
    - "*"

  xpack/ml/get_trained_model_stats.yml:
    - "*"

  xpack/ml/inference_crud.yml:
    - "*"

  xpack/ml/inference_processor.yml:
    - "*"

  xpack/ml/job_cat_apis.yml:
    - "*"

  xpack/ml/job_groups.yml:
    - "*"

  xpack/ml/jobs_crud.yml:
    - "*"

  xpack/ml/jobs_get.yml:
    - "*"

  xpack/ml/jobs_get_result_categories.yml:
    - "*"

  xpack/ml/jobs_get_result_influencers.yml:
    - "*"

  xpack/ml/jobs_get_result_overall_buckets.yml:
    - "*"

  xpack/ml/jobs_get_result_records.yml:
    - "*"

  xpack/ml/jobs_get_stats.yml:
    - "*"

  xpack/ml/ml_anomalies_default_mappings.yml:
    - "*"

  xpack/ml/ml_info.yml:
    - "*"

  xpack/ml/pipeline_inference.yml:
    - "*"

  xpack/ml/post_data.yml:
    - "*"

  xpack/ml/preview_datafeed.yml:
    - "*"

  xpack/ml/set_upgrade_mode.yml:
    - "*"

  xpack/ml/start_data_frame_analytics.yml:
    - "*"

  xpack/ml/start_stop_datafeed.yml:
    - "*"

  xpack/ml/stop_data_frame_analytics.yml:
    - "*"

  xpack/ml/trained_model_cat_apis.yml:
    - "*"

  xpack/ml/upgrade_job_snapshot.yml:
    - "*"

  xpack/privileges/40_get_user_privs.yml:
    - "*"

  xpack/rollup/delete_job.yml:
    - "*"

  xpack/rollup/get_jobs.yml:
    - "*"

  xpack/rollup/put_job.yml:
    - "*"

  xpack/rollup/security_tests.yml:
    - "*"

  xpack/rollup/start_job.yml:
    - "*"

  xpack/rollup/stop_job.yml:
    - "*"

  xpack/runtime_fields/20_long.yml:
    # expected value ... to match Number(40.0) but was Number(40)
    - "terms agg"

  xpack/searchable_snapshots/10_usage.yml:
    - "*"

  xpack/set_security_user/10_small_users_one_index.yml:
    - "*"

  xpack/snapshot/10_basic.yml:
    - "*"

  xpack/ssl/10_basic.yml:
    # this test returns the CA cert before the cert, so always fails
    - "Test get SSL certificates"

  xpack/token/10_basic.yml:
    - "*"

  xpack/token/11_invalidation.yml:
    - "*"

  xpack/transform/transforms_force_delete.yml:
    - "*"

  xpack/transform/transforms_start_stop.yml:
    - "*"

  xpack/transform/transforms_stats_continuous.yml:
    # this test always returns "exponential_avg_checkpoint_duration_ms": 0.0 . seems like it might be missing data in
    # the setup, fires quicker than any documents are processed, or the delay of 1m is too high?
    - "Test get continuous transform stats"

  # Test generator currently doesn't handle unsigned long values.
  # We skip all tests as even the setup code will fail to compile.
  xpack/unsigned_long/10_basic.yml:
    - "*"
  xpack/unsigned_long/20_null_value.yml:
    - "*"
  xpack/unsigned_long/30_multi_fields.yml:
    - "*"
  xpack/unsigned_long/40_different_numeric.yml:
    - "*"
  xpack/unsigned_long/50_script_values.yml:
    - "*"
  xpack/unsigned_long/60_collapse.yml:
    - "*"

  xpack/xpack/20_info.yml:
    - "*"

  free/cat.aliases/10_basic.yml:
    # this test fails as the regex needs a \n before the ending $
    - "Multiple alias names"

  free/cat.indices/10_basic.yml:
    # this test fails as the regex needs a \n before the ending $
    - "Test cat indices using health status"

  free/cat.templates/10_basic.yml:
    # Regex do not account for hidden templates returned by the request
    - "Multiple template"
    - "No templates"
    - "Sort templates"

  free/indices.flush/10_basic.yml:
    # uses number as a key into object. serde_json::Value expects a string key
    - "Index synced flush rest test"

  free/indices.segments/10_basic.yml:
    # uses number as a key into object. serde_json::Value expects a string key
    - "basic segments test"

  free/indices.shard_stores/10_basic.yml:
    # uses number as a key into object. serde_json::Value expects a string key
    - "basic index test"
    - "multiple indices test"

  free/indices.stats/12_level.yml:
    # uses number as a key into object. serde_json::Value expects a string key
    - "Level - shards"

  free/nodes.info/10_basic.yml:
    # node has a lot more roles than those checked in the test (expects "ingest", finds "data_cold")
    - "node_info role test"

  free/search.aggregation/250_moving_fn.yml:
    # The use of an invalid window interval results in a 400 response which looks like
    # it suppresses the sending of deprecation headers
    - "Bad window deprecated interval"
